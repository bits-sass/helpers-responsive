/* ==========================================================================
   Helpers used in responsive webdesign
   ========================================================================== */

/**
 * Variables
 *
 * It is recommended to override these.
 *
 * 1. List of available breakpoints.
 * 2. If it is an old IE, don't serve any media query.
 * 3. If it is an old IE, what breakpoints to include.
 */

$bits-responsive-breakpoints: /* 1 */ (
  (v2 "(min-width: 25em)")
  (v3 "(min-width: 50em)")
) !default;

$bits-old-ie: false !default; /* 2 */
$bits-old-ie-breakpoints: () !default; /* 3 */


/* Mixins
   ========================================================================== */

/**
 * Insert media query
 *
 * --------------
 * Example usage:
 * --------------
 *
 * $bits-responsive-breakpoints: (
 *   (v2 "min-width: 25em")
 *   (v3 "min-width: 50em")
 * );
 *
 * @include breakpoint(v2) {
 *   .example {
 *     text-align: center;
 *   }
 * }
 *
 * @include breakpoint(v3) {
 *   .example {
 *     text-align: right;
 *   }
 * }
 */

@mixin breakpoint($name) {
  $breakpoint-found: false;

  @each $breakpoint in $bits-responsive-breakpoints {
    $breakpoint-name: nth($breakpoint, 1);
    $media-query: nth($breakpoint, 2);

    @if $name == $breakpoint-name {
      $breakpoint-found: true;

      @if $bits-old-ie == true { /* 1 */
        @each $ie-bp in $bits-old-ie-breakpoints {
          @if $name == $ie-bp {
            @content;
          }
        }
      }
      @else {
        @media only screen and #{$media-query} {
          @content;
        }
      }
    }
  }

  @if $breakpoint-found == false {
    @warn "Breakpoint '#{$name}' does not exist.";
  }
}